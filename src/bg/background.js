var eventos = {};

eventos['megaDrop'] = {
    id: 'megaDrop',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["20:00"],
    title: 'Megadrop em 5min!',
    message: 'Todos os servidores no ring de lorencia.',
    link: 'http://google.com'
}

eventos['bloodCastle'] = {
    id: 'bloodCastle',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["00:25", "02:25", "04:25", "06:25", "08:25", "10:25", "12:25", "14:25", "16:25", "18:25", "20:25", "22:25"],
    title: 'Blood Castle em 5min!',
    message: 'É necessário convite.',
    link: 'http://google.com'
}

eventos['chaosCastle'] = {
    id: 'chaosCastle',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["00:55", "02:55", "05:55", "06:55", "08:55", "10:55", "12:55", "14:55", "16:55", "18:55", "20:55", "22:55"],
    title: 'Chaos Castle em 5min!',
    message: 'É necessário convite.',
    link: 'http://google.com'
}

eventos['devilSquare'] = {
    id: 'devilSquare',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["01:25", "03:25", "05:25", "07:25", "09:25", "11:25", "13:25", "15:25", "17:25", "19:25", "21:25", "23:25"],
    title: 'Devil Square em 5min!',
    message: 'É necessário convite.',
    link: 'http://google.com'
}

eventos['mossMerchant'] = {
    id: 'mossMerchant',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["01:55", "07:55", "13:55"],
    title: 'Moss Merchant em 5min!',
    message: 'Aparece no mapa de Elbeland (25,225)',
    link: 'http://google.com'
}

eventos['skeletonKing'] = {
    id: 'skeletonKing',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["00:00", "04:00", "08:00", "12:00", "16:00", "20:00"],
    title: 'Skeleton King em 5min!',
    message: 'Lorencia, Noria.',
    link: 'http://google.com'
}

eventos['redDragon'] = {
    id: 'redDragon',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["00:10", "04:10", "08:10", "12:10", "16:10", "20:10"],
    title: 'Red dragon em 5min!',
    message: 'Lorencia, Noria ou Devias.',
    link: 'http://google.com'
}

eventos['whiteWizard'] = {
    id: 'whiteWizard',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["00:45", "04:45", "08:45", "12:45", "16:45", "20:45"],
    title: 'White Wizard em 5min!',
    message: 'Lorencia, Noria ou Devias.',
    link: 'http://google.com'
}

eventos['dragaoDourado'] = {
    id: 'dragaoDourado',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["00:20", "04:20", "08:20", "12:20", "16:20", "20:20"],
    title: 'Dourados em 5min!',
    message: 'Todos os mapas.',
    link: 'http://google.com'
}

eventos['moonRabbit'] = {
    id: 'moonRabbit',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["02:10", "06:10", "10:10", "14:10", "18:10", "22:10"],
    title: 'Moon Rabbit em 5min!',
    message: 'Lost Tower, Atlans, Tarkan, Aida, Kanturu, Raklion.',
    link: 'http://google.com'
}

eventos['demons'] = {
    id: 'demons',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["01:20", "05:20", "09:20", "13:20", "17:20", "21:20"],
    title: 'Demons em 5min!',
    message: 'Tarkan, Aida, Kanturu, Karutan, Acheron.',
    link: 'http://google.com'
}

eventos['invocacaoDeBoss'] = {
    id: 'invocacaoDeBoss',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["22:55"],
    title: 'Invocação de boss em 5min!',
    message: 'Agora você pode invocar o seu próprio boss para ter acesso aos melhores itens.',
    link: 'http://google.com'
}

eventos['kundun'] = {
    id: 'kundun',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["15:55"],
    title: 'Boss Kundun em 5min!',
    message: 'KALIMA 7',
    link: 'http://google.com'
}

eventos['erohin'] = {
    id: 'erohin',
    dias: [0, 1, 2, 3, 4, 5, 6],
    horarios: ["20:55"],
    title: 'Boss Erohin em 5min!',
    message: 'EXCLUSIVO LAND OF TRIALS',
    link: 'http://google.com'
}

eventos['medusa1'] = {
    id: 'medusa',
    dias: [2],
    horarios: ["21:55"],
    title: 'Boss Medusa em 5min!',
    message: 'PEACE SWAMP',
    link: 'http://google.com'
}

eventos['medusa2'] = {
    id: 'medusa',
    dias: [4],
    horarios: ["21:55"],
    title: 'Boss Medusa em 5min!',
    message: 'PEACE SWAMP',
    link: 'http://google.com'
}

eventos['medusa3'] = {
    id: 'medusa',
    dias: [6],
    horarios: ["15:55"],
    title: 'Boss Medusa em 5min!',
    message: 'PEACE SWAMP',
    link: 'http://google.com'
}

eventos['medusa4'] = {
    id: 'medusa',
    dias: [0],
    horarios: ["17:55"],
    title: 'Boss Medusa em 5min!',
    message: 'PEACE SWAMP',
    link: 'http://google.com'
}

eventos['crywolf1'] = {
    id: 'crywolf',
    dias: [1],
    horarios: ["20:55"],
    title: 'Boss crywolf em 5min!',
    message: 'Todos os mapas.',
    link: 'http://google.com'
}

eventos['crywolf2'] = {
    id: 'crywolf',
    dias: [3],
    horarios: ["20:55"],
    title: 'Boss crywolf em 5min!',
    message: 'Crywolf',
    link: 'http://google.com'
}

eventos['crywolf2'] = {
    id: 'crywolf',
    dias: [6],
    horarios: ["17:55"],
    title: 'Boss crywolf em 5min!',
    message: 'Crywolf',
    link: 'http://google.com'
}

eventos['selupan'] = {
    id: 'selupan',
    dias: [1],
    horarios: ["15:55"],
    title: 'Boss Selupan em 5min!',
    message: 'RAKLION HATCHERY',
    link: 'http://google.com'
}

eventos['selupan2'] = {
    id: 'selupan',
    dias: [3],
    horarios: ["17:55"],
    title: 'Boss Selupan em 5min!',
    message: 'RAKLION HATCHERY',
    link: 'http://google.com'
}

eventos['selupan3'] = {
    id: 'selupan',
    dias: [5],
    horarios: ["15:55"],
    title: 'Boss Selupan em 5min!',
    message: 'RAKLION HATCHERY',
    link: 'http://google.com'
}

eventos['selupan4'] = {
    id: 'selupan',
    dias: [0],
    horarios: ["20:25"],
    title: 'Boss Selupan em 5min!',
    message: 'RAKLION HATCHERY',
    link: 'http://google.com'
}

eventos['tesouroLoren'] = {
    id: 'tesouroLoren',
    dias: [0],
    horarios: ["20:55"],
    title: 'Tesouro perdido em 5min!',
    message: 'Lorência',
    link: 'http://google.com'
}

eventos['tesouroLoren'] = {
    id: 'tesouroLoren',
    dias: [1],
    horarios: ["18:55"],
    title: 'Tesouro perdido em 5min!',
    message: 'Lorência',
    link: 'http://google.com'
}

eventos['tesouroLoren2'] = {
    id: 'tesouroLoren',
    dias: [2],
    horarios: ["20:55"],
    title: 'Tesouro perdido em 5min!',
    message: 'Lorência',
    link: 'http://google.com'
}

eventos['tesouroLoren3'] = {
    id: 'tesouroLoren',
    dias: [3],
    horarios: ["22:55"],
    title: 'Tesouro perdido em 5min!',
    message: 'Lorência',
    link: 'http://google.com'
}

eventos['tesouroLoren3'] = {
    id: 'tesouroLoren',
    dias: [4],
    horarios: ["15:55"],
    title: 'Tesouro perdido em 5min!',
    message: 'Lorência',
    link: 'http://google.com'
}

eventos['tesouroLoren4'] = {
    id: 'tesouroLoren',
    dias: [5],
    horarios: ["18:55"],
    title: 'Tesouro perdido em 5min!',
    message: 'Lorência',
    link: 'http://google.com'
}


eventos['tesouroLoren5'] = {
    id: 'tesouroLoren',
    dias: [6],
    horarios: ["16:55"],
    title: 'Tesouro perdido em 5min!',
    message: 'Lorência',
    link: 'http://google.com'
}

eventos['tesouroDung'] = {
    id: 'tesouroDung',
    dias: [0],
    horarios: ["14:55"],
    title: 'Tesouro perdido em 5min!',
    message: 'Dung',
    link: 'http://google.com'
}

eventos['tesouroDung2'] = {
    id: 'tesouroDung',
    dias: [6],
    horarios: ["21:55"],
    title: 'Tesouro perdido em 5min!',
    message: 'Dung',
    link: 'http://google.com'
}

eventos['ataqueZumbi'] = {
    id: 'ataqueZumbi',
    dias: [1, 2, 3, 4, 5],
    horarios: ["21:55"],
    title: 'Ataque zumbi em 5min!',
    message: 'Para entrar basta digitar /zombie (SERVER 1).',
    link: 'http://google.com'
}

eventos['ataqueZumbi'] = {
    id: 'ataqueZumbi',
    dias: [0, 6],
    horarios: ["18:55"],
    title: 'Ataque zumbi em 5min!',
    message: 'Para entrar basta digitar /zombie (SERVER 1).',
    link: 'http://google.com'
}

eventos['castleSiege'] = {
    id: 'castleSiege',
    dias: [6],
    horarios: ["14:55"],
    title: 'Castle Siege em 5min!',
    message: 'A hora.....',
    link: 'http://google.com'
}

setInterval(function() {
    $.each(eventos, function(k, v) {
        var now = new Date();
        var day = now.getDay();
        var hour = ((now.getHours() < 10) ? "0"+now.getHours() : now.getHours());
        var minute = ((now.getMinutes() < 10) ? "0"+now.getMinutes() : now.getMinutes());
        var storage = chrome.storage.sync;

        storage.get(function(r) {
            if (r.horarioVerao === 'true') {
                if (r.pcBrasilia !== 'true') {
                    hour = (Number(hour) + 1);
                }
            }

            var evento =  hour + ':' + minute;

            if ($.inArray(day, v.dias) !== -1) {
                if ($.inArray(evento, v.horarios) !== -1) {
                    
                    var notify = function(title = 'Title', message = 'Message') {
                        var option = {
                            type: 'basic',
                            title: title,
                            message: message,
                            iconUrl: '../../icons/bell.jpg',
                        }

                        chrome.notifications.create('alarmId', option, function(notificationId) {
                            // if (r.ativarSom === 'true') {
                            //     var mySong = new Audio('../../songs/alarm.mp3');
                            //     mySong.play();
                            // }
                        });
                    };
                
                    var eventId = v.id;
                    var rTest = r[eventId];

                    if (rTest === 'true') {
                        notify(v.title, v.message);
                    }

                    // chrome.notifications.onClicked.addListener(function() {
                    //     chrome.notifications.clear("alarmId");
                    //     window.open(v.link);
                    // });
                }
            }
         });
    });
}, 3000);

